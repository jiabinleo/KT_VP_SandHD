var QPFwb = new WebSocket("ws://" + getHostAndPort() + "/service/KT_S_WA-service/rest/QPF");
var RADARwb = new WebSocket("ws://" + getHostAndPort() + "/service/KT_S_WA-service/rest/RADAR");
var qpfURL = "";
var baseUrl = "/service/KT_S_WA-service";
var qpfData = {};
var fallingAreaIds = [];
QPFwb.onopen = function() {
	QPFwb.send(new Date().getTime())
}
QPFwb.onmessage = function(data) {
	qpfURL = eval(data.data);
	$.get(baseUrl + qpfURL, function(resultdata) {
		qpfData = resultdata;
		console.log(qpfData);
	})
}

RADARwb.onopen = function() {
	RADARwb.send(new Date().getTime())
}
RADARwb.onmessage = function(data) {
	console.log(data)
}

$(function(){
	var fallingAreaDate = {
		"cLat":22.6,
		"cLon":113.75,
		"contourColorMap":{"50.0":"0XD60000"},
		"contourMap":{"50.0":[[[111.1958888884768,23.305888888476805],[111.1904310343977,23.309999999999995],[111.19627516727942,23.313724832720574],[111.2,23.31730263271821],[111.20185520305758,23.31814479694244],[111.2018468464134,23.32],[111.20508819508893,23.324911804911075],[111.20555555338194,23.32555555338194],[111.20873170620057,23.33],[111.2092560795164,23.330743920483595],[111.21000000000001,23.33119815758934],[111.21492268024451,23.335077319755502],[111.21588235574612,23.335882355746108],[111.22,23.339317074160146],[111.22038303633747,23.33961696366253],[111.22058577315701,23.34],[111.22543147181584,23.344568528184173],[111.23,23.34683890625085],[111.23222459853167,23.347775401468343],[111.23319018312301,23.35],[111.23590405854195,23.354095941458056],[111.24,23.35660714376946],[111.24306451545093,23.356935484549094],[111.24944444588346,23.35944444588346],[111.25,23.35954545568391],[111.25055214592554,23.359447854074467],[111.25088235096123,23.36],[111.25716894979026,23.362831050209756],[111.25999999999999,23.3642660548452],[111.26409691616999,23.36409691617001],[111.26902912614166,23.36],[111.26878048791833,23.35878048791834],[111.27,23.357058824849375],[111.27303030197943,23.35696969802058],[111.27740740714579,23.35740740714577],[111.28,23.35730769174339],[111.28411764507888,23.35588235492112],[111.28522388136182,23.355223881361823],[111.28999999999999,23.354482760208256],[111.293615819136,23.35638418086402],[111.2953333346049,23.36],[111.29839080500089,23.361609194999104],[111.3,23.362028985066562],[111.30309392272181,23.363093922721802],[111.30653333256475,23.363466667435258],[111.31,23.366000002347505],[111.31300577871536,23.366994221284646],[111.31509803774904,23.37],[111.31871465275462,23.37128534724538],[111.32,23.371736111387058],[111.3225773198917,23.3725773198917],[111.3282191784759,23.371780821524098],[111.33,23.375],[111.3349056617354,23.374905661735387],[111.33511110922731,23.374888890772688],[111.33999999999999,23.37478261230122],[111.34183333598243,23.371833335982426],[111.34289474054056,23.37],[111.34407407852193,23.365925921478066],[111.34,23.36541666004393],[111.33662337893962,23.3633766210604],[111.33518518937142,23.36],[111.33358974609777,23.35641025390224],[111.33,23.35611110934505],[111.32607143015277,23.353928569847227],[111.32043479198317,23.35],[111.32010309511472,23.34989690488527],[111.32,23.34987499713898],[111.31981307991394,23.349813079913954],[111.31269058351195,23.347309416488052],[111.31,23.34647058823529],[111.30612903225807,23.346129032258066],[111.30377622403739,23.34622377596261],[111.3,23.345781249813736],[111.29531645676586,23.34468354323414],[111.29352940516488,23.34352940516488],[111.28999999999999,23.341874994784597],[111.28878788205728,23.341212117942717],[111.28857143246398,23.34],[111.28324324463648,23.336756755363513],[111.28,23.334782606532308],[111.27555555398573,23.335555553985724],[111.27027026609053,23.340000000000003],[111.27024389869467,23.340243898694677],[111.27000000000001,23.340399993896487],[111.26959184277212,23.34040815722788],[111.26833335452613,23.34],[111.26277777895515,23.337222221044847],[111.26,23.33],[111.25280373811783,23.33280373811784],[111.25,23.332083333112575],[111.24898648643425,23.33101351356576],[111.24545454440367,23.33],[111.24171428529908,23.328285714700918],[111.24,23.32785714318152],[111.23708609333983,23.32291390666017],[111.23216216129526,23.322162161295253],[111.23,23.32116504799235],[111.22891566307283,23.32108433692717],[111.22718750102445,23.32],[111.223303411586,23.316696588414],[111.22,23.31497267696913],[111.21682373500835,23.313176264991657],[111.21228813638773,23.31],[111.21078832139062,23.30921167860936],[111.21000000000001,23.30902527050954],[111.20865671600008,23.308656716000094],[111.20300813049946,23.306991869500557],[111.20000000000002,23.306211603462366],[111.1958888884768,23.305888888476805]],[[114.93957746325634,24.359577463256343],[114.93925925664286,24.36],[114.93923076659735,24.36076923340265],[114.93774999936421,24.367749999364218],[114.9376923071907,24.37],[114.93855614938353,24.371443850616462],[114.94000000000001,24.372647059373516],[114.94473186051543,24.375268139484565],[114.94604938573941,24.376049385739435],[114.94999999999999,24.378350517166727],[114.95120754601821,24.378792453981795],[114.95990244051305,24.37990244051305],[114.96,24.37992753733359],[114.96005037706406,24.379949622935918],[114.96014285496302,24.38],[114.96029411335715,24.380294113357174],[114.96390410949957,24.38609589050043],[114.96518181887541,24.389999999999997],[114.96861979181736,24.391380208182643],[114.97000000000001,24.39194139171618],[114.97332288377261,24.39332288377262],[114.97589315535657,24.394106844643424],[114.98000000000002,24.396612903358122],[114.98255060709675,24.39744939290326],[114.98623762394935,24.4],[114.98821176482416,24.401788235175847],[114.99,24.403725490562735],[114.99364672289742,24.406353277102586],[114.99666666534212,24.41],[114.99759398425074,24.412406015749248],[115.0,24.41780488281432],[115.00096256475044,24.41903743524957],[115.00130434494162,24.42],[115.00107142613858,24.421071426138585],[115.0,24.422999992370606],[114.99830644997549,24.428306449975484],[114.99789999771119,24.43],[114.99855669957138,24.431443300428622],[115.0,24.4325925946857],[115.00341463596179,24.433414635961782],[115.00569892437834,24.43430107562166],[115.01,24.435000000000002],[115.01478087605807,24.435219123941938],[115.01517684922955,24.435176849229563],[115.02,24.43534161556908],[115.02470219413244,24.435297805867556],[115.02539748983361,24.435397489833594],[115.03000000000002,24.43533898274949],[115.03434482763156,24.434344827631566],[115.0385185143323,24.431481485667703],[115.04,24.430740743357134],[115.04038647489,24.430386474889985],[115.04054794735299,24.43],[115.04580547222419,24.42580547222419],[115.05,24.422736844514546],[115.0513265316251,24.421326531625105],[115.05180555695368,24.419999999999998],[115.05097744435034,24.41902255564967],[115.05,24.418219176793688],[115.04758139364881,24.417581393648835],[115.04384133661902,24.416158663380983],[115.03999999999999,24.4154228848451],[115.03592523420994,24.414074765790048],[115.03188679181909,24.411886791819082],[115.03000000000002,24.41102739709921],[115.02896907224604,24.411030927753966],[115.02347825870622,24.41],[115.02043243206461,24.409567567935383],[115.02,24.409298246142384],[115.01724137976393,24.407241379763935],[115.01456375857828,24.405436241421732],[115.01190476709482,24.401904767094823],[115.0103636377508,24.4],[115.01266667683917,24.397333323160808],[115.01480447014288,24.39480447014286],[115.01818180872387,24.391818191276123],[115.01999999999998,24.39018518590469],[115.02007905168733,24.39007905168734],[115.02011695952092,24.39],[115.02036036178455,24.389639638215435],[115.0241043481053,24.384104348105303],[115.02686046588994,24.38],[115.02457364392664,24.37542635607337],[115.02351351588202,24.373513515882024],[115.02162500143051,24.37],[115.0213131323932,24.368686867606797],[115.02,24.36277777601172],[115.01906103299838,24.360938967001623],[115.01866666666666,24.36],[115.01297482832335,24.35702517167665],[115.00999999999999,24.355723684425172],[115.00592505862751,24.354074941372488],[115.0030541863775,24.353054186377506],[115.0,24.351901839643695],[114.99803797555455,24.351962024445452],[114.99171232849869,24.351712328498685],[114.98999999999998,24.351773049357575],[114.98794238708967,24.352057612910315],[114.98264026376049,24.35264026376048],[114.98,24.353030302855156],[114.97704797072903,24.35295202927097],[114.97295202927097,24.35295202927097],[114.96999999999998,24.352877697525827],[114.966347032218,24.35365296778201],[114.9640133777216,24.354013377721607],[114.96,24.355],[114.95555555555556,24.355555555555558],[114.95411764705881,24.355882352941176],[114.95,24.3565],[114.94713114727188,24.35713114727188],[114.94093750307337,24.35906249692664],[114.94,24.35930232310566],[114.93957746325634,24.359577463256343]],[[115.47850353867159,24.488503538671587],[115.47672566337326,24.49],[115.47261392946956,24.492613929469563],[115.47,24.493857867691016],[115.46635542134283,24.496355421342823],[115.46327777721852,24.5],[115.46391376405967,24.503913764059654],[115.46399385523232,24.50600614476769],[115.46486891371855,24.509999999999998],[115.464369747619,24.514369747619003],[115.4641379306716,24.51586206932839],[115.46362903181148,24.52],[115.46399113028026,24.523991130280265],[115.46432592547382,24.525674074526187],[115.4646349201505,24.53],[115.46376288609368,24.533762886093683],[115.45999999999998,24.539864864342398],[115.45995418081019,24.539954180810167],[115.45992700701979,24.54],[115.45993966794325,24.540060332056747],[115.46000000000001,24.540769234155057],[115.46090056194137,24.549099438058626],[115.46075949289155,24.55],[115.46086642520228,24.550866425202287],[115.46040160637031,24.55959839362967],[115.46047619047617,24.56],[115.46095693772918,24.560956937729177],[115.46400937852094,24.565990621479063],[115.46532710258161,24.570000000000004],[115.4672067038511,24.572793296148912],[115.47,24.575928853933732],[115.47197317997373,24.57802682002627],[115.47333333333333,24.58],[115.47540691191728,24.584593088082727],[115.48,24.588879310855116],[115.48079510659484,24.589204893405164],[115.4833766210604,24.59],[115.4884283507337,24.5915716492663],[115.49,24.59195402369409],[115.49256281477835,24.592562814778365],[115.49643916901854,24.593560830981456],[115.5,24.59436363636364],[115.50451977414117,24.59451977414118],[115.50580952337125,24.594190476628746],[115.51000000000002,24.59445946008642],[115.51313539255676,24.593135392556754],[115.51666666795107,24.59],[115.51476534382536,24.585234656174645],[115.5136734744719,24.583673474471897],[115.51140625204891,24.58],[115.51129496572676,24.578705034273256],[115.51167741878325,24.571677418783228],[115.51156626428502,24.570000000000004],[115.5111555550733,24.5688444449267],[115.51000000000002,24.56617647025824],[115.50883333405741,24.56116666594258],[115.50810810922272,24.56],[115.50596154050714,24.55596154050714],[115.50535211337603,24.554647886623965],[115.50204819387855,24.55],[115.5018478271461,24.548152172853907],[115.50318750105052,24.543187501050532],[115.50301775256116,24.539999999999996],[115.50335526407424,24.536644735925748],[115.50391304380277,24.533913043802762],[115.50422535226403,24.530000000000005],[115.50485175222111,24.52514824777889],[115.50489563582745,24.52489563582746],[115.50546610181135,24.52],[115.50287305140611,24.517126948593877],[115.5,24.51477732747878],[115.4972365341859,24.512763465814107],[115.4944859820581,24.509999999999998],[115.49661891135644,24.506618911356433],[115.5,24.50024793328504],[115.50009983336246,24.500099833362462],[115.50015706767591,24.5],[115.50008862607106,24.499911373928924],[115.5,24.499745763341984],[115.49650455922999,24.493495440770012],[115.49361111111112,24.49],[115.49118074477848,24.488819255221504],[115.48999999999998,24.488477751749638],[115.48832474221452,24.488324742214512],[115.481822660393,24.488177339606988],[115.47999999999999,24.487983650852303],[115.47850353867159,24.488503538671587]],[[117.33771653531286,24.82771653531284],[117.33011363678236,24.829999999999995],[117.33003597135753,24.830035971357525],[117.33,24.830032679862818],[117.32980392083532,24.830196079164683],[117.32446623097394,24.834466230973934],[117.32019607916469,24.839803920835315],[117.3200326798628,24.84],[117.32003745332396,24.840037453323987],[117.31999999999998,24.840151515720745],[117.31773519164139,24.847735191641394],[117.31726890753018,24.85],[117.31768683267347,24.852313167326514],[117.32,24.85607476700486],[117.32203883445256,24.85796116554745],[117.32411764639883,24.86],[117.32140233690019,24.86140233690019],[117.32000000000001,24.863888888103972],[117.31756007377031,24.867560073770328],[117.31693023238071,24.87],[117.31343317951489,24.873433179514898],[117.31,24.874447760826918],[117.30552884587529,24.87552884587528],[117.30396226468353,24.876037735316455],[117.3,24.877133105439906],[117.29768595011903,24.87768595011902],[117.29311475327822,24.88],[117.29696750866233,24.88303249133766],[117.3,24.883981043125285],[117.30454054113127,24.884540541131273],[117.30521850871382,24.884781491286173],[117.31,24.885123967276517],[117.31490304679248,24.885096953207523],[117.31510447793485,24.885104477934856],[117.32,24.885075075358884],[117.32436129050167,24.884361290501683],[117.32737991283832,24.880000000000003],[117.32842519690557,24.878425196905578],[117.33000000000001,24.878525798553433],[117.33145278446338,24.87854721553662],[117.3344117639634,24.88],[117.33324324307605,24.883243243076056],[117.3328758167083,24.887124183291714],[117.33217821775634,24.89],[117.33160583935508,24.891605839355083],[117.33,24.89305555537159],[117.32650959855737,24.896509598557362],[117.32393939393938,24.900000000000002],[117.32253411309811,24.902534113098117],[117.31999999999998,24.903939393939392],[117.3160474307481,24.906047430748096],[117.3129133861978,24.907086613802203],[117.31,24.90827906945075],[117.30821256010438,24.908212560104367],[117.30350877146019,24.91],[117.30586592128769,24.91413407871233],[117.30762711667153,24.917627116671518],[117.30887096665033,24.92],[117.30464135006156,24.92464135006156],[117.30326530453367,24.926734695466347],[117.30098765356513,24.93],[117.30068669464656,24.93068669464657],[117.3,24.93117646959826],[117.29548872154574,24.93548872154573],[117.29130434734535,24.94],[117.29072874455161,24.940728744551603],[117.29,24.941058822843033],[117.28523510908059,24.945235109080592],[117.28355932071885,24.950000000000003],[117.28399999891008,24.953999998910085],[117.27999999999999,24.95763636155562],[117.27914473615895,24.959144736158965],[117.27811594078706,24.96],[117.27853107237482,24.96146892762518],[117.27853107237482,24.96853107237482],[117.27879629536422,24.97],[117.27924418543564,24.970755814564363],[117.28,24.971287129797332],[117.28131979793726,24.971319797937255],[117.28464285933242,24.97],[117.28545454703087,24.965454547030866],[117.28615384953967,24.963846150460334],[117.28722222398828,24.96],[117.28838709796504,24.958387097965044],[117.29,24.95938271622381],[117.29051020397243,24.959489796027597],[117.29192307664093,24.96],[117.29592232980943,24.96407767019057],[117.30000000000001,24.965121951673375],[117.30357142832815,24.966428571671855],[117.30673913070521,24.966739130705196],[117.31,24.967540983760333],[117.31464646521081,24.964646465210826],[117.31769230092065,24.96230769907934],[117.32,24.960588237494058],[117.32028846262297,24.960288462622987],[117.32046154022215,24.96],[117.32171429225376,24.95828570774623],[117.32,24.95699998855591],[117.31879310526263,24.951206894737364],[117.31867924725216,24.950000000000003],[117.3193832609409,24.949383260940913],[117.32000000000001,24.949230770520607],[117.32053846065813,24.949461539341858],[117.32139999771118,24.95],[117.32558974241599,24.95441025758401],[117.33000000000001,24.95409523918515],[117.33444444398869,24.955555556011312],[117.33540470004577,24.955404700045765],[117.34,24.95610619476495],[117.343752665103,24.956247334897007],[117.34926315709163,24.96],[117.34942148699102,24.960578513008986],[117.34999999999998,24.96134615511584],[117.35445544537627,24.965544554623722],[117.35560439578865,24.965604395788656],[117.36,24.967142857142854],[117.3626936026244,24.967306397375594],[117.3679912668411,24.9679912668411],[117.36999999999999,24.968130081805104],[117.3717424238155,24.968257576184495],[117.37479166583884,24.969999999999995],[117.3782638888429,24.971736111157103],[117.38,24.97208333333333],[117.38378787911627,24.97378787911628],[117.38563492043669,24.974365079563313],[117.38999999999999,24.97763889010306],[117.39153153057948,24.97846846942052],[117.3922666651408,24.98],[117.39755789435307,24.98244210564695],[117.4,24.98264840227985],[117.40267898423251,24.982678984232503],[117.40794520580158,24.98],[117.40794520580157,24.97794520580158],[117.40794520580157,24.97205479419842],[117.40794520580158,24.97],[117.40745762736522,24.96745762736521],[117.406330275422,24.963669724577997],[117.40578947368421,24.96],[117.40760479052858,24.957604790528585],[117.40884955811961,24.95115044188038],[117.4092972977097,24.95],[117.40952380978997,24.94952380978997],[117.41,24.949297297709695],[117.41434343449426,24.944343434494257],[117.41929729770969,24.94],[117.41781512726261,24.937815127262635],[117.41549048334979,24.934509516650223],[117.41287037067289,24.930000000000003],[117.41202614398334,24.927973856016653],[117.41,24.92655555531419],[117.406298507376,24.92629850737601],[117.40441136667039,24.925588633329614],[117.4,24.925434173797797],[117.39570796453994,24.924292035460084],[117.39067307674894,24.92],[117.39049733557285,24.919502664427178],[117.38999999999999,24.919047619294766],[117.3882822088761,24.918282208876114],[117.38403603610291,24.915963963897088],[117.38,24.91471698096232],[117.37559921389509,24.915599213895078],[117.37423173841768,24.91576826158232],[117.37,24.91651452238153],[117.36612009190469,24.916120091904688],[117.36431977586808,24.915680224131915],[117.36,24.915361445496746],[117.35608142468601,24.916081424686006],[117.35099415135535,24.92],[117.35076749382016,24.920767493820172],[117.34999999999998,24.920994151355362],[117.34900584858919,24.920994151410806],[117.34595238257427,24.92],[117.34290697693761,24.9170930230624],[117.34365671649758,24.913656716497577],[117.34275280889246,24.91],[117.34633001429343,24.90633001429345],[117.35,24.90457983235368],[117.3529183402751,24.9029183402751],[117.35490991021757,24.899999999999995],[117.35536885257996,24.895368852579956],[117.3554787235648,24.894521276435196],[117.35595238095237,24.890000000000004],[117.3569804617708,24.886980461770804],[117.36,24.884333333333334],[117.36262626262628,24.882626262626264],[117.36433333333333,24.88],[117.36375722549566,24.876242774504338],[117.36375722549566,24.873757225495662],[117.36331632662743,24.870000000000005],[117.36187861274783,24.86812138725217],[117.36,24.86722222217694],[117.35528985513756,24.865289855137565],[117.3548360655257,24.86516393447429],[117.35,24.86202702713152],[117.34877800403535,24.86122199596466],[117.34666666666665,24.86],[117.34267260581335,24.857327394186644],[117.33999999999999,24.855973154259324],[117.33675182502458,24.853248174975423],[117.3364400004242,24.85],[117.33800894870765,24.848008948707665],[117.34000000000002,24.846440000424195],[117.34397040717069,24.843970407170687],[117.34644000042418,24.839999999999996],[117.34444137959122,24.835558620408793],[117.3440559444477,24.83405594444769],[117.34266055062994,24.829999999999995],[117.34174523582021,24.828254764179793],[117.34,24.827418397458167],[117.33771653531286,24.82771653531284]],[[116.1477,24.3171],[116.1486,24.2764],[116.1491,24.2605],[116.1318,24.2511],[116.1182,24.2479],[116.1060,24.2493],[116.0868,24.2507],[116.0728,24.2502],[116.0534,24.2654],[116.0511,24.2859],[116.0726,24.3196],[116.0815,24.3182],[116.0969,24.3238],[116.1077,24.3271],[116.1292,24.3290],[116.1477,24.3171]],[[115.6093,24.2522],[115.6068,24.1947],[115.5963,24.1650],[115.5344,24.1520],[115.4831,24.1396],[115.4627,24.1736],[115.4496,24.2445,115.4775,24.2923],[115.5152,24.3115],[115.5647,24.3158],[115.6024,24.3183],[115.6241,24.3145],[115.6359,24.2941],[115.6093,24.2522]],[[116.0271,24.2391],[116.0262,24.1512],[115.9518,24.1432],[115.9688,24.2301],[116.0271,24.2391]]]},
		"contourValues":[50.0],
		"east":119,
		"north":27,
		"south":18.2,
		"url":"/generatedFiles/QPF/QPF_20170626200629_.png",
		"west":108.5
	}
	var fallingArea = {
		init: function(){
			fallingArea.listening();
		},
		isShow: false,
		listening: function(){
			$("#area_caveat").click(function(){
				if(!fallingArea.isShow){
                    qpfData = fallingAreaDate;
                    if(qpfData.url != undefined && qpfData.url != ""){
                        fallingArea.drawWarning(qpfData);
                        fallingArea.queryData(fallingAreaDate.contourMap["50.0"]);
                        fallingArea.queryResourceData(fallingAreaDate.contourMap["50.0"]);
                        fallingArea.isShow = true;
                        qpfData = {};
                    }else{
                        parent.warning.show("暂无落区信息",warningType.info)
                    }
				}else{
                    fallingArea.clearMarker();
                    fallingArea.isShow = false;
				}
			})
		},
		rangIds : [],
		drawWarning: function(resultdata){
			for(var key in resultdata.contourMap) {
				var contours = resultdata.contourMap[key];
				var coords = [];
                for(var i = 0; i < contours.length; i++) {
                    for(var j = 0; j < contours[i].length; j++) {
                        coords.push(contours[i][j][0]);
                        coords.push(contours[i][j][1]);
                    }
                    var id = key + i;
                    fallingArea.rangIds.push(id);
                    addPolygoShape(coords, id);
                    fallingAreaIds.push(id);
                    coords = [];
                }
			}
		},
		queryData: function(condition){
			$.ajax({
				url:  contentPath.basisPath + "/rest/region/multiIntersectTowns",
				type: "POST",
				dataType: "json",
				data: {'jsonStr':JSON.stringify(condition)},
				success: function(data) {
					// console.log(data)
				},
				error: function(data){ }
			})
		},
		queryResourceData: function(condition){
            $.ajax({
                url:  contentPath.resourcePath + "/rest/geometry/query",
                type: "POST",
                dataType: "json",
                data: {'jsonStr':JSON.stringify(condition)},
                success: function(data) {
                	if(data.code && data.code == resourceStatus.success){
                        fallingArea.renderMarker(data.data);
					}else{
                        parent.warning.show("无资源信息",warningType.info)
					}
                },
                error: function(data) { }
            })
		},
		renderMarker: function(data){
			// console.log(data);
			for(var mar in data){
				if(mar == "riskSubside"){//塌陷
					subsideLayer.addMarker(data[mar]);
				}else if(mar == "riskCollapse"){//崩塌
                    collapseLayer.addMarker(data[mar]);
				}else if(mar == "education"){//教育
					siteLayer.addMarker(data[mar],"site_education");
				}else if(mar == "education_v"){//教育视频
                    // videoLayer.addMarker(data[mar],"education");
				}else if(mar == "medicalCare"){//医疗
                    siteLayer.addMarker(data[mar],"site_medicalCare");
				}else if(mar == "urban_management"){//城管视频
                    videoLayer.addMarker(data[mar],"urban_management");
				}else if(mar == "riskLandslide"){//滑坡
					landslideLayer.addMarker(data[mar]);
                }else if(mar == "healthStation"){//卫生站
                    healthBureauLayer.addMarker(data[mar]);
				}else if(mar == "mechanism"){//行政机构
                    siteLayer.addMarker(data[mar],"site_mechanism");
				}else if(mar == "placeEmergency"){//避难场所
                    emergencyPlaceLayer.addMarker(data[mar])
				}else if(mar == "forestry"){//林业视频
                    videoLayer.addMarker(data[mar],"forestry");
				}
				// console.log(mar);
			}
		},
		clearMarker: function(){
			// console.log(videoLayer.typeIdsMap);
            subsideLayer.clearMarker();
            collapseLayer.clearMarker();
            landslideLayer.clearMarker();
            siteLayer.clearMarker("site_education");
            siteLayer.clearMarker("site_medicalCare");
            siteLayer.clearMarker("site_mechanism");
            emergencyPlaceLayer.clearMarker();
            healthBureauLayer.clearMarker();
            videoLayer.clearMarker("urban_management");
            videoLayer.clearMarker("forestry");
            if(fallingArea.rangIds && fallingArea.rangIds.length > 0){
            	for(var i = 0 ; i < fallingArea.rangIds.length ; i++){
                    RemoveEntity(fallingArea.rangIds[i]);
				}
			}
		}}

	fallingArea.init();
})
